From crotwell@lyner.geophysics.lanl.gov Fri Jun 20 18:34 MDT 1997
Received: from localhost (crotwell@localhost) by lyner.geophysics.lanl.gov (8.7.4/8.7.3) with SMTP id SAA24440; Fri, 20 Jun 1997 18:34:51 -0600 (MDT)
Date: Fri, 20 Jun 1997 18:34:50 -0600 (MDT)
From: Philip <crotwell@geophysics.lanl.gov>
To: Jeroen Risema <jeroen@seis.sc.edu>, Tom Owens <owens@seis.sc.edu>,
        Philip <crotwell@lyner.geophysics.lanl.gov>
Subject: Alpha test
Message-ID: <Pine.SOL.3.94.970620165822.23204D-100000@lyner>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Content-Length: 3629
Status: RO
X-Status: 


Hello alpha testers!

I installed a (buggy I'm sure) TauP code in /usr/local/Internal and added
the appropriate stuff to the PATH. Give it a whirl.

I know that the interface is ugly but...

Anyway, here is a brief how to:

First, there are simple shell scripts in TauP/bin that start up java on
the appropriate class file. This just saves some typeing. TauP/bin has
been added to the SeisNet path.

All of the source is in TauP/src and there is html documentation on most
of the methods and variables in the code in TauP/html. Several velocity
models (text) are in TauP/VModels. I've put one (iasp91 for P) model
in /usr/local/Internal/TauP so you can get travel times from it without
creating a new one.

Also, the command line args and program names are subject to change so if
you have suggestions on better names/command args or even the order on the
command line...

--------------

To create a new table for P:
taup_create /usr/local/Internal/TauP/VModels/iasp91.tvel

For S:
taup_create /usr/local/Internal/TauP/VModels/iasp91.tvel S

On my ultra 1 it takes about 3-5 minutes to generate a new model. I think
this is unacceptably high, but I haven't had time to fix it, although I
have given some thought to how. It will be even slower on penfold,
especially when Jeroen is running his inversion. :)

Also, you will see lots of 
'Problem, redo..." messages, this is my very inefficient model sampling.
Ignore them.

--------------

To get traveltimes from one of these, first put the phases you
want into a file called .phases (right now it needs to be in the same dir
or in ~). Also, you can put P and S phases in the .phases file but you
will get the P or S equvalent depending on which model you use. ie ScS in
a P saved model would get times for PcP. I'll merge the phases soon,
hopefully.

taup_time /usr/local/Internal/TauP/P_iasp91.tvel.save

Again, the startup time for this is way too much, but it will decrease as
I decrease the size of the model generated by taup_create.
You will see the phases that have been read from your .phases file.
Then you will see:

Done reading P_iasp91.tvel.save
Enter Depth:

Enter the source depth. Right now a bunch of debugging info spews out for
each phase. you may want to check to see that the path is really the path
you want, keeping in mind that the branch that the source was in is split
into 2 branches with the source depth between them. Next you see:

Enter Distance:

Enter the distance in degrees. All internal computations are done in
radians, but the input code handles the conversion.

The output is "tab phaseName tab time tab rayParameter
time is in seconds and ray parameter is in seconds (per radian)

q quits

----------

Other codes are:

taup_path -- doesn't work yet (but soon, so don't worry Jeroen)
   Usage:taup_path savedfilename phaseName depth distance

taup_peek -- lets you peek at the Velocity model, slowness model, or
   tau model
   Usage:taup_peek savedfilename

taup_wcreate -- same as taup_create but shows some graphs, this will be
   improved greatly to allow the various parameters to be changed
   Usage:taup_wcreate velocitytextfile [P or S]

SeismicPhase -- this is the phase parser used by taup_time, executing it
   directly was/is for debugging the phase parser, source depth is 100km
   Usage:SeismicPhase savedfilename phaseName phaseName ... phaseName

I think the biggest problem right now is speed, it is too slow for people
to actually use. I will try to work on this soon. 

Please let me know what you think, what bugs you find, what you think
needs to be changed, and what you think the priorities are.

Thanks,
Philip


